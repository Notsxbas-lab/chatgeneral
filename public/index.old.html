<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Chat Global</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
      :root{--bg:#eef6f5;--primary:#0f766e;--muted:#6b7280;--me:#dafbe9;--other:#ffffff}
      *{box-sizing:border-box}
      html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
      body{background:linear-gradient(180deg,#e6fffb 0%, #f7fdfa 100%);display:flex;align-items:center;justify-content:center;padding:24px}

      .chat-wrap{width:100%;max-width:920px;height:80vh;background:linear-gradient(180deg,#ffffff,#fbfffe);border-radius:12px;box-shadow:0 10px 30px rgba(15,23,42,0.12);display:flex;flex-direction:column;overflow:hidden}

      header{padding:18px 20px;border-bottom:1px solid #eef2f2;display:flex;align-items:center;justify-content:space-between}
      header h1{margin:0;font-size:1.1rem;color:var(--primary)}
      header p{margin:0;color:var(--muted);font-size:0.9rem}

      #messages{flex:1;overflow:auto;padding:18px;display:flex;flex-direction:column;gap:10px;background:transparent}

      .bubble{max-width:72%;padding:10px 14px;border-radius:14px;box-shadow:0 2px 6px rgba(2,6,23,0.04);display:inline-block}
      .row{display:flex;gap:10px;align-items:flex-end}
      .row.me{justify-content:flex-end}
      .bubble.me{background:var(--me);border-bottom-right-radius:6px}
      .bubble.other{background:var(--other);border-bottom-left-radius:6px}
      .meta{font-weight:600;color:#064e47;margin-bottom:6px;font-size:0.92rem}
      .time{font-size:0.75rem;color:var(--muted);margin-left:8px}

      .system{align-self:center;color:var(--muted);font-size:0.85rem}

      #form{display:flex;padding:14px;border-top:1px solid #eef2f2;background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.8));gap:10px}
      #input{flex:1;padding:12px;border-radius:10px;border:1px solid #e6efee;font-size:1rem}
      #send{background:var(--primary);color:white;border:none;padding:0 16px;border-radius:10px;font-weight:600}

      /* overlay para nombre */
      #overlay{position:absolute;inset:0;background:rgba(2,6,23,0.35);display:flex;align-items:center;justify-content:center}
      #nameModal{background:white;padding:22px;border-radius:12px;min-width:300px;box-shadow:0 12px 40px rgba(2,6,23,0.2);display:flex;flex-direction:column;gap:12px}
      #nameModal input{padding:10px;border:1px solid #e6efee;border-radius:8px}
      #nameModal button{background:var(--primary);color:white;border:none;padding:10px;border-radius:8px;font-weight:600}

      @media (max-width:600px){.chat-wrap{height:92vh;padding:0}}
    </style>
  </head>
  <body>
    <div class="chat-wrap">
      <header>
        <div>
          <h1>Chat Global</h1>
          <p>Habla con gente de todo el mundo â€” pÃºblico y en tiempo real</p>
        </div>
        <div style="text-align:right"><small class="muted">ConexiÃ³n: <span id="status">desconocida</span></small></div>
      </header>

      <div style="padding:12px 18px;border-bottom:1px solid #f0f6f5;display:flex;gap:10px;align-items:center">
        <label style="font-size:0.9rem;color:var(--muted)">Sala:</label>
        <select id="roomSelect">
          <option value="global">#global</option>
        </select>
        <input id="newRoom" placeholder="Nueva sala" style="padding:8px;border-radius:8px;border:1px solid #e6efee" />
        <button id="createRoom" style="background:#065f58;color:white;border:none;padding:8px;border-radius:8px">Crear</button>
        <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
          <input id="fileInput" type="file" accept="image/*" style="display:none" />
          <button id="attachBtn" type="button" style="background:transparent;border:1px solid #e6efee;padding:8px;border-radius:8px">ðŸ“Ž</button>
          <button id="emojiBtn" type="button" style="background:transparent;border:1px solid #e6efee;padding:8px;border-radius:8px">ðŸ˜Š</button>
        </div>
      </div>

      <div id="messages"></div>

      <form id="form">
        <input id="input" autocomplete="off" placeholder="Escribe un mensaje..." />
        <button id="send" type="submit">Enviar</button>
      </form>
    </div>

    <div id="overlay">
      <div id="nameModal">
        <div style="font-weight:700">Elige un nombre</div>
        <input id="username" placeholder="Tu nombre pÃºblico" />
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button id="setName">Unirse al chat</button>
        </div>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/chat.js"></script>
  </body>
</html>
